{
  "title": "Net Migration by Top 5 Country of Birth from 2014 to 2024",
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 600,
  "height": 450,
  "data": {
    "url": "https://raw.githubusercontent.com/kluk0007/kluk0007_Monash_FIT3179_A2/refs/heads/main/data/net_overseas_migration_top_5_countries_of_birth_transposed.csv"
  },
  "transform": [
    {
      "fold": [
        "Jun-14","Sep-14","Dec-14","Mar-15","Jun-15","Sep-15","Dec-15","Mar-16","Jun-16","Sep-16","Dec-16","Mar-17","Jun-17","Sep-17","Dec-17","Mar-18","Jun-18","Sep-18","Dec-18","Mar-19","Jun-19","Sep-19","Dec-19","Mar-20","Jun-20","Sep-20","Dec-20","Mar-21","Jun-21","Sep-21","Dec-21","Mar-22","Jun-22","Sep-22","Dec-22","Mar-23","Jun-23","Sep-23","Dec-23","Mar-24","Jun-24"
      ],
      "as": ["Month", "Value"]
    },
    {
      "calculate": "['Jun-14','Sep-14','Dec-14','Mar-15','Jun-15','Sep-15','Dec-15','Mar-16','Jun-16','Sep-16','Dec-16','Mar-17','Jun-17','Sep-17','Dec-17','Mar-18','Jun-18','Sep-18','Dec-18','Mar-19','Jun-19','Sep-19','Dec-19','Mar-20','Jun-20','Sep-20','Dec-20','Mar-21','Jun-21','Sep-21','Dec-21','Mar-22','Jun-22','Sep-22','Dec-22','Mar-23','Jun-23','Sep-23','Dec-23','Mar-24','Jun-24'][monthIndex]",
      "as": "month_label"
    },
    {
      "filter": "datum.Month == datum.month_label"
    },
    {
      "calculate": "format(datum.Value, '.1f') + 'K'",
      "as": "Value_K"
    }
  ],
  "params": [
    {
      "name": "monthIndex",
      "value": 0,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 40,
        "step": 1,
        "name": "Month-year Index: "
      }
    }
  ],
  "mark": "bar",
  "encoding": {
    "x": {"field": "Country"},
    "y": {
      "aggregate": "sum",
      "field": "Value",
      "scale": {"domain": [-100, 100]},
      "title": "Net Migration (Thousand People)"
    },
    "color": {
      "condition": [
        {
          "test": "datum.Value < 0",
          "value": "#f5424b"
        }
      ],
      "value": "#4287f5"
    },
    "tooltip": [
      {"field": "month_label", "title": "Month-Year"},
      {"field": "Country", "title": "Country of Birth"},
      {"field": "Value", "title": "Net Migration (Thousand People)"}
    ]
  }
}
